"0",""
"0",""
"0",""
"0","# Now read in all water yield data and subset to following subsets of data"
"0","# 1. training data"
"0","# 2. validating data (Stations not included in training data)"
"0","# 3. testing data (Stations not included in training data)"
"0","# 4. validating data (Stations included in training data)"
"0","# 5. testing data (Stations included in training data) "
"0",""
"0",""
"0","# monthly WY"
"0","# 1."
"0","#if(st_yr == 98){"
"0","  dt_train_mnthWY <- dt_mnthWY["
"0","    site_no %chin% dt_train_ID$STAID & "
"0","      yr %in% seq(1998, 2007, 1),"
"0","  ]"
"0","#"
"0",""
"0","# nit = not in training"
"0","# 2. "
"0","dt_val_mnthWY_nit <- dt_mnthWY["
"0","  site_no %chin% dt_val_ID$STAID &"
"0","    !yr %in% c(2013) #c(seq(1976, 1997, 1)),"
"0","]"
"0","# 3."
"0","dt_test_mnthWY_nit <- dt_mnthWY["
"0","  site_no %chin% dt_test_ID$STAID &"
"0","    !yr %in% c(2013) #c(seq(1976, 1997, 1)),"
"0","]"
"0","# in = in training data"
"0","# 4."
"0","#if(st_yr == 98){"
"0","  dt_val_mnthWY_in <- dt_mnthWY["
"0","    site_no %chin% dt_train_ID$STAID &"
"0","      yr %in% seq(2008, 2012, 1),"
"0","  ]"
"0","# }else if(st_yr == 80){"
"0","#    dt_val_mnthWY_in <- dt_mnthWY["
"0","#     site_no %chin% dt_train_ID$STAID &"
"0","#       wtryr %in% seq(1990, 1994, 1), "
"0","#   ]"
"0","# }"
"0","# 5."
"0","dt_test_mnthWY_in <- dt_mnthWY["
"0","  site_no %chin% dt_train_ID$STAID &"
"0","    yr %in% seq(1980, 1997, 1)# c(1976, 1977, 1978, 1979, seq(1995, 2012, 1)),"
"0","]"
"0","# check that data seems consistent"
"0","# first two rows should be equal"
"0","nrow(dt_mnthWY[site_no %chin% dt_train_ID$STAID & !yr == 2013])"
"1","[1]"
"1"," 1290516"
"1","
"
"0","sum(nrow(dt_train_mnthWY) + nrow(dt_val_mnthWY_in) + nrow(dt_test_mnthWY_in))"
"1","[1]"
"1"," 1172988"
"1","
"
"0","# next two rows should be equal"
"0","nrow(dt_mnthWY[site_no %chin% tmp_others$STAID & !yr == 2013])"
"1","[1]"
"1"," 460032"
"1","
"
"0","sum(nrow(dt_val_mnthWY_nit) + nrow(dt_test_mnthWY_nit))"
"1","[1]"
"1"," 460032"
"1","
"
"0","# # write annual wy data to files"
"0","data.table::fwrite("
"0","  dt_train_mnthWY,"
"0","   ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/monthly_WY/Mnthly_WY_train.csv"""
"0","   #""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/monthly_WY/Mnthly_WY_train.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_val_mnthWY_nit,"
"0","   ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/monthly_WY/Mnthly_WY_val_nit.csv"""
"0","   # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/monthly_WY/Mnthly_WY_val_nit.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_test_mnthWY_nit,"
"0","  ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/monthly_WY/Mnthly_WY_test_nit.csv"""
"0","  #""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/monthly_WY/Mnthly_WY_test_nit.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_val_mnthWY_in,"
"0","   ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/monthly_WY/Mnthly_WY_val_in.csv"""
"0","   # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/monthly_WY/Mnthly_WY_val_in.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_test_mnthWY_in,"
"0","   ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/monthly_WY/Mnthly_WY_test_in.csv"""
"0","  # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/monthly_WY/Mnthly_WY_test_in.csv"""
"0",")"
"0",""
"0","# annual WY"
"0","# 1."
"0","# if(st_yr == 98){"
"0","  dt_train_annWY <- dt_annWY["
"0","    site_no %chin% dt_train_ID$STAID & "
"0","     yr %in% seq(1998, 2007, 1),"
"0","  ]"
"0","# }else if(st_yr == 80){"
"0","#   dt_train_annWY <- dt_annWY["
"0","#     site_no %chin% dt_train_ID$STAID & "
"0","#       wtryr %in% seq(1980, 1989, 1),"
"0","#   ]"
"0","# }"
"0","# nit = not in training"
"0","# 2. "
"0","dt_val_annWY_nit <- dt_annWY["
"0","  site_no %chin% dt_val_ID$STAID &"
"0","    !yr == 2013,"
"0","]"
"0","# 3. "
"0","dt_test_annWY_nit <- dt_annWY["
"0","  site_no %chin% dt_test_ID$STAID &"
"0","    !yr == 2013,"
"0","]"
"0","# in = in training data"
"0","# 4."
"0","# if(yr_st == 98){"
"0","  dt_val_annWY_in <- dt_annWY["
"0","    site_no %chin% dt_train_ID$STAID &"
"0","      yr %in% seq(2008, 2012, 1),"
"0","  ]"
"0","# } else if(yr_st == 80){"
"0","#   dt_val_annWY_in <- dt_annWY["
"0","#   site_no %chin% dt_train_ID$STAID &"
"0","#     wtryr %in% seq(1990, 1994, 1), # seq(2008, 2012, 1),"
"0","# ]"
"0","# }"
"0","# 5."
"0","dt_test_annWY_in <- dt_annWY["
"0","  site_no %chin% dt_train_ID$STAID &"
"0","    yr %in% c(seq(1980, 1997, 1)), # c(1976, 1977, 1978, 1979, seq(1995, 2012, 1)),"
"0","]"
"0",""
"0",""
"0","# # check that data seems consistant"
"0","# # first two rows should be equal"
"0","nrow(dt_annWY[site_no %chin% dt_train_ID$STAID & !yr == 2013])"
"1","[1]"
"1"," 107543"
"1","
"
"0","sum(nrow(dt_train_annWY) + nrow(dt_val_annWY_in) + nrow(dt_test_annWY_in))"
"1","[1]"
"1"," 97749"
"1","
"
"0","# next two rows should be equal"
"0","nrow(dt_annWY[!site_no %chin% dt_train_ID$STAID & !yr == 2013])"
"1","[1]"
"1"," 38336"
"1","
"
"0","sum(nrow(dt_val_annWY_nit) + nrow(dt_test_annWY_nit))"
"1","[1]"
"1"," 38336"
"1","
"
"0","# # write annual wy data to files"
"0","data.table::fwrite("
"0","  dt_train_annWY,"
"0","   ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_train.csv"""
"0","  #""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/annual_WY/Ann_WY_train.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_val_annWY_nit,"
"0","  ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_val_nit.csv"""
"0","  # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/annual_WY/Ann_WY_val_nit.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_test_annWY_nit,"
"0","  ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_test_nit.csv"""
"0","  # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/annual_WY/Ann_WY_test_nit.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_val_annWY_in,"
"0","    ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_val_in.csv"""
"0","  # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/annual_WY/Ann_WY_val_in.csv"""
"0",")"
"0","data.table::fwrite("
"0","  dt_test_annWY_in,"
"0","  ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_test_in.csv"""
"0","  # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/annual_WY/Ann_WY_test_in.csv"""
"0",")"
"0",""
"0","#####"
"0","# daily wy"
"0","#####"
"0","# read in the individual station csv's and subset to approriate subset of data"
"0",""
"0","# first addressing those stations that are being used for training"
"0","for(stn in dt_train_ID$STAID) {"
"0","  # Now read in all water yield data and subset to following subsets of data"
"0","  # 1. training data"
"0","  # 4. validating data (Stations included in training data)"
"0","  # 5. testing data (Stations included in training data) "
"0","  tmp_dt <- data.table::fread("
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/daily_WY/Daily_WY_1976_2013_"","
"0","      stn,"
"0","      "".csv"""
"0","    ), keepLeadingZeros = TRUE # close paste0"
"0","  ) # close fread"
"0","  # 1."
"0","  # if(yr_st == 98) {"
"0","    tmp_train <- tmp_dt["
"0","      yr %in% seq(1998, 2007, 1), "
"0","      ]"
"0","  # } else if(yr_st == 80) {"
"0","  #   tmp_train <- tmp_dt["
"0","  #     wtryr %in% seq(1980, 1989, 1), "
"0","  #     ]"
"0","  # }"
"0","  # 4."
"0","  # if(yr_st == 98){"
"0","    tmp_val_in <- tmp_dt["
"0","      yr %in% seq(2008, 2012, 1),"
"0","    ]"
"0","  # } else if(yr_st == 80){"
"0","  #   tmp_val_in <- tmp_dt["
"0","  #     wtryr %in% seq(1990, 1994, 1), "
"0","  #   ]"
"0","  # }"
"0","  # 5."
"0","  # if(yr_st == 98){"
"0","    tmp_test_in <- tmp_dt["
"0","      yr %in% seq(1979, 1997, 1),"
"0","    ]"
"0","  # } else if(yr_st == 80){"
"0","  #   tmp_test_in <- tmp_dt["
"0","  #     wtryr %in% seq(1995, 2012, 1),"
"0","  #   ]"
"0","  # }"
"0","  "
"0","  # write to new files"
"0","  # train"
"0","  data.table::fwrite(tmp_train,"
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/daily_WY/train/Daily_WY_train_"","
"0","      # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/daily_WY/train/Daily_WY_train_"","
"0","      stn,"
"0","      "".csv"""
"0","    ) # close paste0"
"0","  ) # close fwrite"
"0",""
"0","  # write to new files"
"0","  # validate in"
"0","  data.table::fwrite(tmp_val_in,"
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/daily_WY/validate/Daily_WY_valin_"","
"0","      # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/daily_WY/validate/Daily_WY_valin_"","
"0","      stn,"
"0","      "".csv"""
"0","    ) # close paste0"
"0","  ) # close fwrite"
"0",""
"0","  # write to new files"
"0","  # test in"
"0","  data.table::fwrite(tmp_test_in,"
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/daily_WY/test/Daily_WY_testin_"","
"0","      # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/daily_WY/test/Daily_WY_testin_"","
"0","      stn,"
"0","      "".csv"""
"0","    ) # close paste0"
"0","  ) # close fwrite"
"0","} # close for loop"
"0",""
"0","# next addressing validating stations that are not being used for training"
"0","for(stn in dt_val_ID$STAID) {"
"0",""
"0","  # 2. validating data (Stations not included in training data)"
"0",""
"0","  tmp_dt <- data.table::fread("
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/daily_WY/Daily_WY_1976_2013_"","
"0","      stn,"
"0","      "".csv"""
"0","    ), keepLeadingZeros = TRUE # close paste0"
"0","  ) # close fread"
"0",""
"0","  # 2."
"0","  tmp_val_in <- tmp_dt["
"0","    !wtryr == 2013,"
"0","  ]"
"0",""
"0",""
"0","  # write to new files"
"0","  # validate nit"
"0","  data.table::fwrite(tmp_val_in,"
"0","    paste0("
"0","      ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/daily_WY/validate/Daily_WY_valnit_"","
"0","      # ""D:/DataWorking/USGS_discharge/train_val_test/yrs_80_94/daily_WY/validate/Daily_WY_valnit_"","
"0","      stn,"
"0","      "".csv"""
"0","    ) # close paste0"
"0","  ) # close fwrite"
"0",""
"0","} # close for loop"

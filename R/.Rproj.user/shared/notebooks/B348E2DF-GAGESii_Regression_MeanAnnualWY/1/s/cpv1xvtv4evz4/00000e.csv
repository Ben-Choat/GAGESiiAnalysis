"0","# annual water yield "
"0","# training"
"0","dt_annWY_train <- data.table::fread("
"0","        paste0("
"0","        ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_train.csv"""
"0","        ) , keepLeadingZeros = TRUE"
"0","      )"
"0",""
"0","# validate in"
"0","dt_annWY_valin <- data.table::fread("
"0","        paste0("
"0","        ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_val_in.csv"""
"0","        ) , keepLeadingZeros = TRUE"
"0","      )"
"0",""
"0","# validate nit"
"0","dt_annWY_valnit <- data.table::fread("
"0","        paste0("
"0","        ""D:/DataWorking/USGS_discharge/train_val_test/yrs_98_12/annual_WY/Ann_WY_val_nit.csv"""
"0","        ) , keepLeadingZeros = TRUE"
"0","      )"
"0",""
"0","# # static watershed characteristics"
"0","# dt_static <- data.table::fread("
"0","#   ""D:/Projects/GAGESii_ANNstuff/Data_Out/GAGES_Static_Filtered.csv"","
"0","#   keepLeadingZeros = TRUE"
"0","#   )"
"0",""
"0","# ID variables"
"0","dt_ID <- data.table::fread("
"0","  ""D:/Projects/GAGESii_ANNstuff/Data_out/GAGES_idVars.csv"","
"0","  keepLeadingZeros = TRUE)"
"0",""
"0","# calculate mean wy for each station"
"0","dt_annWYmn_train <- dt_annWY_train["
"0","  , .(mn_anl_ft3 = mean(Ann_WY_ft3),"
"0","      mn_anl_acft = mean(Ann_WY_acft)),"
"0","      by = site_no]"
"0",""
"0","dt_annWYmn_valin <- dt_annWY_valin["
"0","  , .(mn_anl_ft3 = mean(Ann_WY_ft3),"
"0","      mn_anl_acft = mean(Ann_WY_acft)),"
"0","      by = site_no]"
"0",""
"0",""
"0","dt_annWYmn_valnit <- dt_annWY_valnit["
"0","  , .(mn_anl_ft3 = mean(Ann_WY_ft3),"
"0","      mn_anl_acft = mean(Ann_WY_acft)),"
"0","      by = site_no]"
"0",""
"0",""
"0","# data.table of GAGES explanatory vars"
"0","dt_expl_train <- data.table::fread("
"0","  'D:/Projects/GAGESii_ANNstuff/Data_Out/ExplVars_Model_In/All_ExplVars_Train_Interp_98_12.csv',"
"0","  keepLeadingZeros = TRUE"
"0",")"
"0",""
"0","dt_expl_valin <- data.table::fread("
"0","  'D:/Projects/GAGESii_ANNstuff/Data_Out/ExplVars_Model_In/All_ExplVars_ValIn_Interp_98_12.csv',"
"0","  keepLeadingZeros = TRUE"
"0",")"
"0",""
"0","dt_expl_valnit <- data.table::fread("
"0","  'D:/Projects/GAGESii_ANNstuff/Data_Out/ExplVars_Model_In/All_ExplVars_ValNit_Interp_98_12.csv',"
"0","  keepLeadingZeros = TRUE"
"0",")"
"0",""
"0",""
"0",""
"0","# merge explanatory vars with annual water yield vars"
"0",""
"0","dt_all_train <- merge("
"0","  dt_expl_train, "
"0","  dt_annWY_train,"
"0","  by.x = c(""STAID"", ""year""), by.y = c(""site_no"", ""yr"")"
"0","  )["
"0","  , ':=' (site_no = NULL,"
"0","          yr = NULL)"
"0","]"
"0",""
"0","dt_all_valin <- merge("
"0","  dt_expl_valin, "
"0","  dt_annWY_valin,"
"0","  by.x = c(""STAID"", ""year""), by.y = c(""site_no"", ""yr"")"
"0","  )["
"0","  , ':=' (site_no = NULL,"
"0","          yr = NULL)"
"0","]"
"0",""
"0","dt_all_valnit <- merge("
"0","  dt_expl_valnit, "
"0","  dt_annWY_valnit,"
"0","  by.x = c(""STAID"", ""year""), by.y = c(""site_no"", ""yr"")"
"0","  )["
"0","  , ':=' (site_no = NULL,"
"0","          yr = NULL)"
"0","]"
"0",""
"0",""
"0",""
"0","# mean of all vars"
"0",""
"0","dt_all_mn_train <- copy(dt_all_train)["
"0","  , lapply(.SD, mean), by = STAID"
"0","]["
"0","  , ':=' (year = NULL)"
"0","]"
"0",""
"0","dt_all_mn_valin <- copy(dt_all_valin)["
"0","  , lapply(.SD, mean), by = STAID"
"0","]["
"0","  , ':=' (year = NULL)"
"0","]"
"0",""
"0","dt_all_mn_valnit <- copy(dt_all_valnit)["
"0","  , lapply(.SD, mean), by = STAID"
"0","]["
"0","  , ':=' (year = NULL)"
"0","]"
"0",""
"0",""
"0","# Variable types and descriptions"
"0","dt_types_descr <- fread("
"0","  ""D:/Projects/GAGESii_ANNstuff/Data_Out/ExplVars_Model_In/VarTypesDescrpts.csv"""
"0",")["
"0","  , VarDescription := NULL"
"0","]"
"0","dt_types_descr[VarType == ""Physical"", ]$VarType <- ""Bas_Morph"""
"0",""
"0",""
"0","# Remove stations that only have streamflow pre-1980 from expl vars"
"0","# NOTE: one station made it into water yield, but is not represented in "
"0","# explanatory variables, because the only year with discharge was before 1980"
"0",""
"0","ind_rm_del <- which(!unique(dt_annWYmn_valnit$site_no) %chin% dt_all_mn_valnit$STAID)"
"0",""
"0","sta_rm_del <- dt_annWYmn_valnit[ind_rm_del, site_no]"
"0",""
"0","dt_all_mn_valnit <- dt_all_mn_valnit[!STAID == sta_rm_del,]"
"0","dt_all_all_valnit <- dt_all_valnit[!STAID == sta_rm_del, ]"
"0","dt_annWY_valnit <- dt_annWY_valnit[!site_no == sta_rm_del, ]"
"0","dt_annWYmn_valnit <- dt_annWYmn_valnit[!site_no == sta_rm_del, ]"
"0","dt_expl_valnit <- dt_expl_valnit[!STAID == sta_rm_del, ]"
"0",""
"0","rm(list = ls(pattern = ""del""))"
